@use '@angular/material' as mat;
//Importar tema creado
@use '../src/app/theme-colors' as colors;
@use 'sass:map';

// FunciÃ³n helper para acceder a colores de la paleta
@function c($palette, $shade) {
  @return map.get($palette, $shade);
}

html {
  color-scheme: light;
  //aplicar tema
  @include mat.theme((color: (primary: colors.$primary-palette,
        secondary: colors.$secondary-palette,
        tertiary: colors.$tertiary-palette,
        surface: colors.$surface,
        backgrounds: colors.$background,
        on-surface: colors.$on-surface,
        on-background: colors.$on-background,
      ),
      typography: Inter,
      density: 0,
    ));


  // Material Component Overrides
  /*https://v19.material.angular.dev/components/toolbar/styling*/
  @include mat.toolbar-overrides((container-background-color: c(colors.$primary-palette, 40),
    ));


  // max width for the app
  .container-sm {
    max-width: 576px;
    padding: 20px;
    width: 100%;
    height: 100%;
    margin: auto;
    box-sizing: border-box;
  }

  .container-md {
    max-width: 768px;
    padding: 20px;
    width: 100%;
    height: 100%;
    margin: auto;
    box-sizing: border-box;
  }

  .container-lg {
    max-width: 992px;
    padding: 20px;
    width: 100%;
    height: 100%;
    margin: auto;
    box-sizing: border-box;
    overflow: hidden;
  }

  .container-xl {
    max-width: 1200px;
    padding: 20px;
    width: 100%;
    height: 100%;
    margin: auto;
    box-sizing: border-box;
  }

  .container-xxl {
    max-width: 1400px;
    padding: 20px;
    width: 100%;
    height: 100%;
    margin: auto;
    box-sizing: border-box;
    overflow: hidden;
  }

  .primary-gradient {
    background: linear-gradient(90deg, #{c(colors.$primary-palette, 10)}, #{c(colors.$primary-palette, 50)});

    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25);
    backdrop-filter: blur(8px);

    // Contenido sobre el gradiente
    >* {
      position: relative;
      z-index: 1;
    }

  }

  .sidebar-gradient {
    background: linear-gradient(-45deg, #{c(colors.$primary-palette, 50)}, #{c(colors.$primary-palette, 10)});
  }


  @include mat.menu-overrides((container-color: c(colors.$primary-palette, 50),
    ));

  @include mat.select-overrides((panel-background-color: rgba(0, 0, 0, 0.7),
    ));

  @include mat.tooltip-overrides((container-color: rgba(0, 0, 0, 0.6),
      supporting-text-color: white));

  @include mat.dialog-overrides((container-color: black,
      subhead-color: c(colors.$primary-palette, 80),
      subhead-size: 1.5em,
      supporting-text-color: white,
      headline-padding: 0.5em,
      supporting-text-line-height: 1.5em,
      content-padding: 1em));

  @include mat.snack-bar-overrides((button-color: black));

  @include mat.form-field-overrides((error-text-color: #e74c3c,
      filled-error-active-indicator-color: #cb4335,
      container-text-size: 1em,
    ));

  // Cards
  .bg-primary-card {
    background: linear-gradient(90deg, #{c(colors.$primary-palette, 50)}, #{c(colors.$primary-palette, 10)});
  }

  .bg-secondary-card {
    background: linear-gradient(90deg, #{c(colors.$secondary-palette, 50)}, #{c(colors.$secondary-palette, 10)});
  }

  .bg-tertiary-card {
    background: linear-gradient(90deg, #{c(colors.$tertiary-palette, 50)}, #{c(colors.$tertiary-palette, 10)});
  }

  // Badges
  .number-cart {
    @include mat.badge-overrides((background-color: c(colors.$secondary-palette, 50),
        line-height: 1em,
        container-shape: 10px,
        container-padding: 0.2em));
  }

  // Chips
  @each $type, $palette in (primary: colors.$primary-palette, secondary: colors.$secondary-palette, tertiary: colors.$tertiary-palette) {
    .chip-#{$type} {
      @include mat.chips-overrides((elevated-container-color: c($palette, 60),
          hover-state-layer-color: c($palette, 40),
          label-text-color: white,
          outline-color: white,
        ));
    }
  }

  // Icon colors
  @each $type, $palette in (primary: colors.$primary-palette, secondary: colors.$secondary-palette, tertiary: colors.$tertiary-palette) {
    .ico-#{$type} {
      @include mat.icon-overrides((color: c($palette, 70)));
    }
  }

  // backgrounds
  @each $type, $palette in (primary: colors.$primary-palette, secondary: colors.$secondary-palette, tertiary: colors.$tertiary-palette) {
    .bg-gradient-#{$type} {
      background: linear-gradient(-45deg, #{map.get($palette, 50)}, #{map.get($palette, 10)});
    }

    .btn-#{$type} {
      backdrop-filter: blur(12px);
      color: white;
      border-radius: 8px;
      padding: 0.6em 1.5em;
      font-weight: 600;
      font-size: 0.875rem;
      letter-spacing: 0.5px;
      border: 1px solid rgba(map.get($palette, 40), 1);
      backdrop-filter: blur(10px);
      box-shadow: -4px 4px 15px rgba(map.get($palette, 30), 0.9);
      cursor: pointer;
      transition: transform 0.2s ease, background 0.3s ease, box-shadow 0.3s ease;

      &:hover {
        transform: scale(1.05);
        box-shadow: -6px 6px 25px rgba(map.get($palette, 30), 0.9);
      }

      &::before {
        content: '';
        position: absolute;
        border-radius: 8px;
        inset: 0;
        background: linear-gradient(-45deg, #{map.get($palette, 50)}, #{map.get($palette, 10)});
        z-index: -1;
        transition: opacity 0.4s ease;
        opacity: 1;
      }

      &:hover::before {
        opacity: 0;
      }

      &::after {
        border-radius: 8px;
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(-45deg, #{map.get($palette, 10)}, #{map.get($palette, 50)});
        z-index: -2;
      }

      &:active {
        transform: scale(0.98);
        box-shadow: 0 3px 15px rgba(map.get($palette, 50), 0.25);
      }

      &:focus-visible {
        outline: 2px solid rgba(map.get($palette, 60), 0.5);
        outline-offset: 2px;
      }
    }

    // .#{$type}-title {
    //     font-weight: bold;
    //     background-color: rgba(map.get($palette, 50), 0.6);
    //     color: var(--mat-sys-on-surface);
    //     font-weight: bold;
    //     border-radius: 12px;
    //     padding: 0.5em 1em;
    //     text-align: center;
    //     backdrop-filter: blur(6px);

    //     box-shadow: 0 3px 12px rgba(map.get($palette, 50), 0.25);
    //   }


    .input-group-#{$type} {
      display: flex;
      flex-direction: column;
      gap: 0.1em;
      margin-bottom: 1.2em;
      position: relative;
      width: 100%;

      label {
        font-weight: 600;
        font-size: 0.95rem;
        color: map.get($palette, 50);
        letter-spacing: 0.3px;
      }

      input {
        width: 100%;
        padding: 2px 0px 3px 5px;
        font-size: 1rem;
        font-weight: 500;
        border: none;
        border-bottom: 2px solid transparent;
        background-color: transparent;
        color: var(--mat-sys-on-surface);
        outline: none;
        position: relative;
        z-index: 1;

        &:focus {}

        &::placeholder {
          color: rgba(map.get($palette, 60), 0.5);
          font-weight: 400;
        }
      }

      &::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        height: 3px;
        width: 100%;
        background: linear-gradient(to right, #{map.get($palette, 50)}, #{map.get($palette, 10)});
        opacity: 1;
        transition: opacity 0.4s ease;
        border-bottom-left-radius: 4px;
        border-bottom-right-radius: 4px;
      }
    }

    .title-#{$type} {
      font-weight: bold;
      display: inline-block;
      position: relative;
      background: linear-gradient(to right, #{map.get($palette, 50)}, #{map.get($palette, 10)});
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      color: transparent;
    }

  }


  // Card header
  .card-header-secondary {
    background-color: c(colors.$secondary-palette, 60);
    color: white;
    padding-bottom: 0.5em;
  }

  // Active link
  .active-link {
    background-color: c(colors.$primary-palette, 10);
    color: c(colors.$secondary-palette, 90);
  }

  // Tables
  .tabla {
    @include mat.table-overrides((row-item-outline-color: c(colors.$tertiary-palette, 95),
        row-item-label-text-color: white));
  }

}